// Compatibility patch for EL

// If both EL and CRP are installed, asteroids will have competing MetalOre and MetallicOre
//	(the existing behavior if Custom Asteroids is not installed)
// If EL but not CRP is installed, then MetallicOre resources are reinterpreted as MetalOre


// Never allow MetalOre where we don't normally allow metal mining
@PART:HAS[!MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]]:AFTER[Launchpad]
{
	!MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetalOre]] {}
}

// Dual installs
@PART:HAS[@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]],@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetalOre]]]:AFTER[Launchpad]:NEEDS[CommunityResourcePack]
{
	@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetalOre]]
	{
		%presenceChance = #$/MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]/presenceChance$
		%lowRange = #$/MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]/lowRange$
		%highRange = #$/MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]/highRange$
	}
}
@PART:HAS[@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]],!MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetalOre]]]:AFTER[Launchpad]:NEEDS[CommunityResourcePack]
{
	+MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]
	{
		%resourceName = MetalOre
	}
}

// EL but not CRP
@PART:HAS[@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]]:AFTER[Launchpad]:NEEDS[!CommunityResourcePack]
{
	!MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetalOre]] {}
	@MODULE[ModuleAsteroidResource]:HAS[#resourceName[MetallicOre]]
	{
		%resourceName = MetalOre
	}
}
